window.Modernizr=function(e,t,n){function r(e){m.cssText=e}function i(e,t){return r(prefixes.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t){for(var r in e){var i=e[r];if(!o(i,"-")&&m[i]!==n)return t=="pfx"?i:!0}return!1}function a(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}function f(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+w.join(r+" ")+r).split(" ");return s(t,"string")||s(t,"undefined")?u(i,t):(i=(e+" "+E.join(r+" ")+r).split(" "),a(i,t,n))}var l="2.7.1",c={},h=!0,p=t.documentElement,d="modernizr",v=t.createElement(d),m=v.style,g,y={}.toString,b="Webkit Moz O ms",w=b.split(" "),E=b.toLowerCase().split(" "),S={},x={},T={},N=[],C=N.slice,k,L={}.hasOwnProperty,A;!s(L,"undefined")&&!s(L.call,"undefined")?A=function(e,t){return L.call(e,t)}:A=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=C.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(C.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(C.call(arguments)))};return r}),S.csstransitions=function(){return f("transition")};for(var O in S)A(S,O)&&(k=O.toLowerCase(),c[k]=S[O](),N.push((c[k]?"":"no-")+k));return c.addTest=function(e,t){if(typeof e=="object")for(var r in e)A(e,r)&&c.addTest(r,e[r]);else{e=e.toLowerCase();if(c[e]!==n)return c;t=typeof t=="function"?t():t,typeof h!="undefined"&&h&&(p.className+=" "+(t?"":"no-")+e),c[e]=t}return c},r(""),v=g=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=y.elements;return typeof e=="string"?e.split(" "):e}function i(e){var t=m[e[d]];return t||(t={},v++,e[d]=v,m[v]=t),t}function s(e,n,r){n||(n=t);if(g)return n.createElement(e);r||(r=i(n));var s;return r.cache[e]?s=r.cache[e].cloneNode():h.test(e)?s=(r.cache[e]=r.createElem(e)).cloneNode():s=r.createElem(e),s.canHaveChildren&&!c.test(e)&&!s.tagUrn?r.frag.appendChild(s):s}function o(e,n){e||(e=t);if(g)return e.createDocumentFragment();n=n||i(e);var s=n.frag.cloneNode(),o=0,u=r(),a=u.length;for(;o<a;o++)s.createElement(u[o]);return s}function u(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?s(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function a(e){e||(e=t);var r=i(e);return y.shivCSS&&!p&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),g||u(e,r),e}var f="3.7.0",l=e.html5||{},c=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,p,d="_html5shiv",v=0,m={},g;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",p="hidden"in e,g=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){p=!0,g=!0}})();var y={elements:l.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:f,shivCSS:l.shivCSS!==!1,supportsUnknownElements:g,shivMethods:l.shivMethods!==!1,type:"default",shivDocument:a,createElement:s,createDocumentFragment:o};e.html5=y,a(t)}(this,t),c._version=l,c._domPrefixes=E,c._cssomPrefixes=w,c.testProp=function(e){return u([e])},c.testAllProps=f,p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+N.join(" "):""),c}(this,this.document);var _gaq=_gaq||[];window.gettext=function(e){return typeof this.__ttLocaleData=="undefined"?e:this.__ttLocaleData.hasOwnProperty(e)?this.__ttLocaleData[e][1]:e},window.TT=function(){var e=Array.prototype,t=e.forEach,n=e.indexOf,r=e.slice,i={invalid_email:gettext("Please enter a valid email address."),unknown_error:gettext("An unexpected error occurred. Please try again.")},s={"-32604":"invalid_email","-32018":"variation_required"},o=function(e){return document.getElementById(e)},u={fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},a=function(e){return e.preventDefault=a.preventDefault,e.stopPropagation=a.stopPropagation,e};a.preventDefault=function(){this.returnValue=!1},a.stopPropagation=function(){this.cancelBubble=!0};var f={_re:{trim:/^(\s|\u00A0)+|(\s|\u00A0)+$/g},isUndefined:function(e){return typeof e=="undefined"},isFunction:function(e){return typeof e=="function"},isString:function(e){return typeof e=="string"},trim:function(e){return(e||"").replace(this._re.trim,"")},each:function(e,n,r){if(t&&e.forEach===t)e.forEach(n,r);else for(var i=0,s=e.length;i<s;i++)if(n.call(r,e[i],i,e)===!1)return},map:function(e,t,n){var r=[];return f.each(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r},inArray:function(e,t){if(n&&t.indexOf===n)return t.indexOf(e);for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1},readCookie:function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},noop:function(){}},l=f.log={init:function(){var e=window.console,t=["error","warn","info","debug","log"];for(var n=t.length-1;n>=0;n--)(function(t){this[t]=function(){if(e===void 0||e.log===void 0)return;var n=r.call(arguments);(f.isFunction(e[t])?e[t]:e.log).call(e,n)}}).call(this,t[n])}};l.init();var c=f.browser={hasOpacitySupport:function(){return this._opacitySupport===undefined&&(this._opacitySupport="opacity"in document.body.style),this._opacitySupport},hasCSSTransitionSupport:function(){if(this._cssTransitionSupport===undefined){var e=!1,t=["Webkit","Moz","O","ms","Khtml"],n=document.body;if(n.style.transitionProperty!==undefined)e=!0;else for(var r=0;r<t.length;r++)if(n.style[t[r]+"TransitionProperty"]!==undefined){e=!0;break}this._cssTransitionSupport=e}return this._cssTransitionSupport}},h=f.dom={_re:{space:/\s+/,cls:/[\n\t\r]/g},getElementsByClassName:function(e,t,n){e=e||document,n=n||"*";if(e.getElementsByClassName)return e.getElementsByClassName(t);var r=[],i=e.getElementsByTagName(n),s=new RegExp("(^|\\s)"+t+"(\\s|$)");for(var o=0,u=i.length;o<u;o++)s.test(i[o].className)&&r.push(i[o]);return r},isChildOf:function(e,t){if(!e||!t)return!1;while(e.parentNode!==null){if(e.parentNode===t)return!0;e=e.parentNode}return!1},empty:function(e){while(e.childNodes.length!==0)e.removeChild(e.firstChild)},setTextContent:function(e,t){this.empty(e),e.appendChild(document.createTextNode(t))},getSize:function(e,t){var n=e.offsetWidth,r=e.offsetHeight;if(t===!0){var i=this._getNumericalStyleValue,s,o,u;if((s=e.ownerDocument.defaultView)&&(o=s.getComputedStyle(e,null)))n+=i(o.getPropertyValue("margin-left"))+i(o.getPropertyValue("margin-right")),r+=i(o.getPropertyValue("margin-top"))+i(o.getPropertyValue("margin-bottom"));else if(u=e.currentStyle)n+=i(u.marginLeft)+i(u.marginRight),r+=i(u.marginTop)+i(u.marginBottom)}return{width:n,height:r}},_getNumericalStyleValue:function(e){var t=0;return e&&e.substr(e.length-2)==="px"&&(t=parseFloat(e)||0),t},css:function(e,t,n){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;if(!!f.isUndefined(n))return e.style[t];typeof n=="number"&&!u[t]&&(n+="px");try{e.style[t]=n}catch(r){}},hasClass:function(e,t){return(" "+e.className+" ").replace(this._re.cls," ").indexOf(" "+t+" ")>-1?!0:!1},addClass:function(e,t){var n=t.split(this._re.space);if(e.nodeType===1)if(!e.className&&n.length===1)e.className=t;else{var r=(" "+e.className+" ").replace(this._re.cls," ");for(var i=0,s=n.length;i<s;i++)r.indexOf(" "+n[i]+" ")===-1&&(r+=n[i]+" ");e.className=f.trim(r)}},removeClass:function(e,t){var n=(t||"").split(this._re.space);if(e.nodeType===1&&e.className)if(t){var r=(" "+e.className+" ").replace(this._re.cls," ");for(var i=0,s=n.length;i<s;i++)r=r.replace(" "+n[i]+" "," ");e.className=f.trim(r)}else e.className=""},toggleClass:function(e,t,n){var r=typeof n=="boolean",i,s=0,o=n,u=t.split(this._re.space);while(i=u[s++])o=r?o:!this.hasClass(e,i),this[o?"addClass":"removeClass"](e,i)},addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](a(window.event))},e.attachEvent("on"+t,e[t+n]))},removeEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&(e.detachEvent("on"+t,e[t+n]),e[t+n]=null,e["e"+t+n]=null)},reflow:function(){document.body.offsetWidth},serializeForm:function(e){var t={};for(var n=0,r=e.elements.length;n<r;n++){var i=e.elements[n];if(!i.name)continue;if((i.type==="checkbox"||i.type==="radio")&&!i.checked)continue;if(i.type==="select-one")~i.selectedIndex&&(t[i.name]=i.options[i.selectedIndex].value);else if(i.type==="select-multiple"){var s=[];for(var o=0,u=i.options.length;o<u;o++)i.options[o].selected&&s.push(i.options[o].value);t[i.name]=s}else t[i.name]=i.value}return t}},p=f.ajax={XMLHttpFactories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],createXMLHttpRequest:function(){var e=null,t=this.XMLHttpFactories;for(var n=0,r=t.length;n<r;n++)try{e=t[n]();break}catch(i){}return e},sendRequest:function(e,t,n,r){var i=this.createXMLHttpRequest();if(!i)return;i.open(t?"POST":"GET",e,!0),t&&(i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t=this.encodeQueryString(t)),i.onreadystatechange=function(){if(i.readyState!==4)return;f.isFunction(n)&&n.call(r,i)};if(i.readyState===4)return;return i.send(t),i},get:function(e,t,n,r){f.isFunction(t)&&(r=n,n=t,t=null);if(t){var i=this.encodeQueryString(t);i!==""&&(e+=(e.indexOf("?")===-1?"?":"&")+i),t=null}return this.sendRequest(e,null,n,r)},post:function(e,t,n,r){return f.isFunction(t)&&(r=n,n=t,t=null),this.sendRequest(e,t,n,r)},encodeQueryString:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.length!==0?t.join("&"):""}},d=f.api={get:function(e,t,n){return this.send("get",e,t,n)},post:function(e,t,n){return this.send("post",e,t,n)},send:function(e,t,n,r){e=e.toLowerCase(),r=r||{};var i=window.__ttApiUrl,s=this._getPayload(t,n,r.id),o=function(e){this._handleResponse(e,r)};if(!i)return l.error("__ttApiUrl is undefined"),null;if(e==="post"&&r.omitXsrf!==!1){var u=f.readCookie("_xsrf");u===void 0&&(l.error("_xsrf cookie is undefined"),u=""),s._xsrf=u}return p[e](i,s,o,this)},_getPayload:function(e,t,n){var r={jsonrpc:"2.0",method:e,params:t,id:n||null};return{jsonrpc:JSON.stringify(r)}},_handleResponse:function(e,t){var n=e.status,r=n>=200&&n<300||n===304,i={};try{i=JSON.parse(e.responseText)}catch(s){i.error={code:-32700,message:"Parse error"}}r&&i.result!==void 0?i=i.result:(r=!1,i=i.error),r&&f.isFunction(t.success)?t.success.call(t.ctx||window,i,e,t):!r&&f.isFunction(t.error)&&t.error.call(t.ctx||window,i,e,t),f.isFunction(t.complete)&&t.complete.call(t.ctx||window,r,i,e,t)}},v=f.tracker={prefix:"Colophon",register:function(e){e!==void 0&&this._mixpanel("register",e)},track:function(e,t,n){n||(n={}),t!==void 0&&(n.mp_note=t),this._mixpanel("track",this.prefix+": "+e,n),window.optimizely&&window.optimizely.push(["trackEvent",this.prefix+": "+e])},trackLinks:function(e,t,n){this._mixpanel("track_links",e,this.prefix+": "+t,n)},_mixpanel:function(e){if(window.mixpanel===void 0)return;var t=r.call(arguments,1);mixpanel[e].apply(mixpanel,t)}},m=f.store={domReady:function(){this.colophon.domReady(),this.init()},init:function(e){e=e||document,f.isUndefined(e.jquery)||(e=e[0]),this.product.init(e),this.search.init(e),this.slideshow.init(e),this.fullscreen.init(e),this.social.init(e)}},g=f.store.colophon={_re:{hash:/#.*$/,hashMessage:/^#?\d+&/},domReady:function(){this.frame=window.frames.tt_colophon,this.frameElem=o("tt_colophon"),this.baseUrl=window.__ttBaseUrl,this.baseDomain=window.__ttBaseUrl.replace(/.*?:\/\//g,""),this.colophonUrl=window.__ttColophonUrl;if(!this.colophonUrl){l.error("__ttColophonUrl is undefined");return}this.showCartOnFallback=window.location.hash==="#cart",this.showFollow=window.location.hash==="#follow",this.showUnfollowed=window.location.hash==="#unfollowed";var e=this.isSmallScreen();if(window.postMessage){h.addEvent(window,"message",function(e){g.rm(e)}),this.pm=this.postMessage;if(e&&this.frameElem){var t=this.colophonUrl.replace(this._re.hash,"")+"#small_screen";this.frameElem.setAttribute("src",t)}}else this.pollForHashChanges(),this.pm=this.changeHash,this.pm({method:"init",url:window.location.href,small_screen:e});A.init()},postMessage:function(e){if(this.frame){var t=JSON.stringify(e);this.frame.postMessage(t,this.colophonUrl)}},changeHash:function(e){if(this.frameElem){var t=JSON.stringify(e),n=this.colophonUrl.replace(this._re.hash,"");n+="#"+ +(new Date)+"&"+t,this.frameElem.setAttribute("src",n)}},rm:function(e){if(e.origin!==this.baseUrl)return;var t=null;try{t=JSON.parse(e.data)}catch(n){}if(!t)return;switch(t.method){case"colophon.inited":this.pm({method:"set_return_url",url:window.location.href}),A.track(),A.hijackCheckout();case"resize":this.resize(t);var r="colophon_active";t.cart_visible||t.follow_visible?h.addClass(document.body,r):h.removeClass(document.body,r),(t.cart_visible||t.follow_visible)&&y.hideOnMouseDown(),!t.cart_visible&&!t.follow_visible&&(this.showCartOnFallback&&t.method==="colophon.inited"?y.show():(this.showFollow||this.showUnfollowed)&&t.method==="colophon.inited"&&y.showFollow());break;case"add.item.error":f.each(document.getElementsByTagName("form"),function(e){if(h.hasClass(e,"tictail_add_to_cart"))return e.submit(),!1})}},pollForHashChanges:function(e){this.intervalId&&(clearInterval(this.intervalId),delete this.intervalId);if(e===!1)return;var t=this._re.hashMessage;this.intervalId=setInterval(function(){var e=window.location.hash;e!=="#1"&&t.test(e)&&(window.location.hash="#1",g.rm({origin:g.baseUrl,data:e.replace(t,"")}))},100)},isSmallScreen:function(){var e,t;return f.isUndefined(window.innerWidth)?document.documentElement&&!f.isUndefined(document.documentElement.clientWidth)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.body.clientWidth,t=document.body.clientHeight):(e=window.innerWidth,t=window.innerHeight),e<482||t<500},resize:function(e){this.frameElem&&(e.width&&h.css(this.frameElem,"width",e.width),e.height&&(h.css(this.frameElem,"height",e.height),this._attachScrollHandlerIfNeeded()))},_attachScrollHandlerIfNeeded:function(){var e=h.getSize(this.frameElem).height,t=this._innerHeight();e>t?this._attachScrollHandler():this._detachScrollHandler()},_attachScrollHandler:function(){var e=this._pageYOffset();h.css(this.frameElem,"position","absolute"),h.css(this.frameElem,"top",e),_this=this,window.onscroll=function(){var t=_this._pageYOffset();t<e&&(e=t<0?0:t,h.css(_this.frameElem,"top",e))}},_detachScrollHandler:function(){h.css(this.frameElem,"position","fixed"),h.css(this.frameElem,"top",0),window.onscroll=null},_innerHeight:function(){return window.innerHeight||document.documentElement.clientHeight},_pageYOffset:function(){return window.pageYOffset!==undefined?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},focus:function(){this.frame&&this.frame.focus()}},y=f.store.cart={show:function(){this.cancelDelayedHide(),g.pm({method:"show_cart"}),g.focus()},hide:function(){this.cancelDelayedHide(),this.listeningForMouseDown===!0&&(h.removeEvent(document,"mousedown",this.mouseDownOutside),this.listeningForMouseDown=!1),g.pm({method:"hide_cart"}),g.pm({method:"hide_follow"})},showFollow:function(){this.cancelDelayedHide(),/^#?(follow|unfollowed)$/.test(window.location.hash)&&(window.location.hash=""),g.pm({method:"show_follow",showUnfollowed:g.showUnfollowed}),g.showUnfollowed=!1,g.focus()},hideOnMouseDown:function(){if(this.listeningForMouseDown===!0)return;h.addEvent(document,"mousedown",this.mouseDownOutside),this.listeningForMouseDown=!0},mouseDownOutside:function(e){y.delayedHide()},delayedHide:function(){this.cancelDelayedHide(),this.hideTimeout=setTimeout(function(){y.hide()},150)},cancelDelayedHide:function(){this.hideTimeout&&(clearTimeout(this.hideTimeout),delete this.hideTimeout)},addItem:function(e){this.cancelDelayedHide(),e.method="add_item",g.pm(e),g.focus()}},b=f.store.product={init:function(e){f.each(e.getElementsByTagName("form"),function(e){if(!h.hasClass(e,"tictail_add_to_cart"))return;h.addEvent(e,"submit",function(t){t.preventDefault();var n=h.serializeForm(e);y.addItem(n)})})}},w=f.store.search={template:'{{#products}}<div class="item"><a class="result" href="{{url}}"><span class="thumb">{{#primary_image?}}{{#primary_image}}<img src="{{url-50}}" alt="{{title}}">{{/primary_image}}{{/primary_image?}}</span><span class="title">{{title}}</span>{{#in_stock}}<span class="price">{{{price_with_currency}}}</span>{{/in_stock}}{{#out_of_stock}}<span class="price out_of_stock">'+gettext("Out of stock")+"</span>"+"{{/out_of_stock}}"+"</a>"+"</div>"+"{{/products}}"+"{{#is_empty}}"+'<div class="no-results no_results">'+gettext("No products found")+"</div>"+"{{/is_empty}}",init:function(e){f.each(h.getElementsByClassName(e,"tictail_search"),this.initSearch,this)},initSearch:function(e){var t={form:e,input:e.querySelector(".tictail_search_box"),searchUrl:window.__ttSearchUrl,results:document.createElement("div"),placeholder:null,request:null,timeout:null},n=t.input,r=t.searchUrl,i=t.results;if(!n)return;if(!t.searchUrl){l.error("__ttSearchUrl is undefined");return}i.setAttribute("id","tictail_search_results"),i.setAttribute("class","tictail_search_results"),h.addClass(i,"results_box results-box"),h.css(i,"display","none"),e.appendChild(i);var s=t.placeholder=n.getAttribute("title");n.removeAttribute("title"),this.togglePlaceholder(t,!0),h.addEvent(n,"focus",function(){w.togglePlaceholder(t,!1),n.value&&i.childNodes.length!==0&&w.toggleResults(t,!0)}),h.addEvent(n,"blur",function(){w.togglePlaceholder(t,!0)}),h.addEvent(n,"keydown",function(e){e.keyCode===27&&(n.value="",w.cancel(t),w.toggleResults(t,!1))}),h.addEvent(n,"keyup",function(e){n.value?w.delayedSearch(t,n.value):(w.cancel(t),w.toggleResults(t,!1))}),h.addEvent(e,"submit",function(e){e.preventDefault()})},togglePlaceholder:function(e,t){var n=e.input,r=e.placeholder;if(t!==!1){if(!n.value||n.value===r)n.value=r,h.addClass(n,"placeholder")}else n.value===r&&(n.value="",h.removeClass(n,"placeholder"))},search:function(e,t){this.cancel(e);var n={q:t};e.request=p.get(e.searchUrl,n,function(t){this.handleResults(e,t)},this)},cancel:function(e){if(e.request){try{e.request.abort()}catch(t){}delete e.request}this.cancelDelayedSearch(e)},delayedSearch:function(e,t){e.timeout&&clearTimeout(e.timeout),e.results.innerHTML='<div class="no_results no-results">'+gettext("Searching...")+"</div>",this.toggleResults(e,!0),e.timeout=setTimeout(function(){w.search(e,t)},500)},cancelDelayedSearch:function(e){e.timeout&&(clearTimeout(e.timeout),delete e.timeout)},handleResults:function(e,t){if(t!==e.request)return;delete e.request;var n=null;try{n=JSON.parse(t.responseText)}catch(r){}n||(n={is_empty:!0});var i=Mustache.render(this.template,n);e.results.innerHTML=i},toggleResults:function(e,t){var n=this;t=t!==!1,h.css(e.results,"display",t?"block":"none"),h.addEvent(document,"click",function(t){n.handleClick(e,t)})},handleClick:function(e,t){h.isChildOf(t.target,e.form)||(w.toggleResults(e,!1),h.removeEvent(document,"click",w.handleClick))}},E=f.store.slideshow={init:function(e){f.each(h.getElementsByClassName(e,"tictail_slideshow"),this.initSlideshow,this)},initSlideshow:function(e){var t=h.getElementsByClassName(e,"slide"),n=t.length;if(n<=1){h.addClass(t[0],"first");return}var i={elem:e,slides:r.call(t),numSlides:n,initedSlides:[],curIndex:0,loop:h.hasClass(e,"loop"),fade:h.hasClass(e,"fade")};this.slideIsInitialized(i,i.curIndex)||this.initializeSlide(i,i.curIndex),h.addClass(i.slides[i.curIndex],"first"),this.slideLoaded(i,i.curIndex,function(){setTimeout(function(){E.activate(i)},50)})},activate:function(e){if(h.hasClass(e.elem,"active"))return;for(var t=e.numSlides-1;t>=0;t--){var n=e.slides[t],r=n.parentNode;r.appendChild(n),t!==e.curIndex&&this.setSlideVisible(n,!1)}this.createArrow(e,"previous",-1),this.createArrow(e,"next",1);var i="active";e.loop||(e.curIndex===0?i+=" start":e.curIndex===e.numSlides-1&&(i+=" end")),h.addClass(e.elem,i)},createArrow:function(e,t,n){var r=document.createElement("div");return h.addClass(r,"arrow "+t),h.addEvent(r,"mousedown",function(e){e.preventDefault()}),h.addEvent(r,"click",function(t){t.preventDefault(),E.showSlide(e,e.curIndex+n)}),e.elem.appendChild(r),r},slideIsInitialized:function(e,t){var n=e.slides[t];if(!n)return!1;if(f.inArray(t,e.initedSlides)!==-1)return!0;var r=h.getElementsByClassName(n,"image_placeholder").length!==0;return r||e.initedSlides.push(t),!r},initializeSlide:function(e,t){var n=e.slides[t];if(!n)return!1;var r=h.getElementsByClassName(n,"image_placeholder");for(var i=r.length-1;i>=0;i--){var s=r[i],o=s.getAttribute("data-src"),u=s.getAttribute("data-alt");if(!o)continue;var a=document.createElement("img");a.setAttribute("src",o),u&&a.setAttribute("alt",u),a.removeAttribute("width"),a.removeAttribute("height"),s.parentNode.replaceChild(a,s)}e.initedSlides.push(t)},slideLoaded:function(e,t,n){var r=e.slides[t],i=r?r.getElementsByTagName("img"):null;if(!r||i.length===0){n.call(E,e,t);return}var s=0,o=function(){h.removeEvent(this,"load",o),h.removeEvent(this,"error",o),s--,s<=0&&n.call(E,e,t)};for(var u=i.length-1;u>=0;u--){var a=i[u];a.complete||(s++,h.addEvent(a,"load",o),h.addEvent(a,"error",o))}s===0&&n.call(E,e,t)},showSlide:function(e,t){t<0?t=e.loop?e.numSlides-1:0:t>=e.numSlides&&(t=e.loop?0:e.numSlides-1);if(t===e.curIndex)return;this.slideIsInitialized(e,t)||this.initializeSlide(e,t);var n=e.slides[t],r=n.parentNode;r.appendChild(n),e.fade&&c.hasCSSTransitionSupport()?setTimeout(function(){E.setSlideVisible(n,!0)},10):this.setSlideVisible(n,!0),this.setSlideVisible(e.slides[e.curIndex],!1),e.loop||(h[t===0?"addClass":"removeClass"](e.elem,"start"),h[t===e.numSlides-1?"addClass":"removeClass"](e.elem,"end")),e.curIndex=t},setSlideVisible:function(e,t){c.hasOpacitySupport()?h.css(e,"opacity",t?1:0):h.css(e,"visibility",t?"visible":"hidden")}},S=f.store.fullscreen={_groups:{},_overlay:null,init:function(e){f.each(e.getElementsByTagName("a"),function(e){if(!h.hasClass(e,"fullscreen"))return;this.initFullscreen(e)},this)},initFullscreen:function(e,t){t=t||{},this.loadCss();var n={elem:e,type:this.getType(e,t),groupName:this.getGroupName(e,t),opts:t};if(n.groupName){var r=this._groups[n.groupName];f.isUndefined(r)&&(r=this._groups[n.groupName]=[]),r.push(n)}var i=function(e){e.preventDefault(),S.open(n)};if(!f.isUndefined(window.jQuery))try{window.jQuery(e).bind(t.eventType||"click",i);return}catch(s){}h.addEvent(e,t.eventType||"click",i)},loadCss:function(){if(!this.cssLoaded()){var e=window.__ttAssetsUrl;if(!f.isUndefined(e)){var t=document.createElement("link");t.href=e+"/shared/css/fullscreen.css",t.rel="stylesheet",t.type="text/css";var n=document.getElementsByTagName("head");n&&n.length!==0&&n[0].appendChild(t)}else l.error("__ttAssetsUrl is undefined");this._cssLoaded=!0}},cssLoaded:function(){if(f.isUndefined(this._cssLoaded)){var e=document.createElement("div");e.className="tictail_fullscreen",document.body.appendChild(e);var t=null;window.getComputedStyle?t=window.getComputedStyle(e,null).position:e.currentStyle&&(t=e.currentStyle.position),this._cssLoaded=t&&t!=="static",document.body.removeChild(e)}return this._cssLoaded},getType:function(e,t){if(t.type){var n=String(t.type).toLowerCase();if(n==="iframe"||n==="image")return n}if(h.hasClass(e,"fullscreen_iframe"))return"iframe";if(h.hasClass(e,"fullscreen_image"))return"image";if(e.nodeName&&e.nodeName.toUpperCase()==="A"){var r=(e.getAttribute("href")||"").toLowerCase(),i=r.substr(r.lastIndexOf(".")+1);if(i==="jpg"||i==="jpeg"||i==="png"||i==="gif")return"image"}return"iframe"},getGroupName:function(e,t){var n=t.group||e.getAttribute("data-fullscreen-group")||e.getAttribute("rel");return n?String(n).toLowerCase():null},getContent:function(e){var t=e.elem,n=e.opts,r,i=document.createElement("div");n.width&&h.css(i,"width",n.width),n.height&&h.css(i,"height",n.height);if(e.type==="iframe"){i.className="tictail_fullscreen_iframe",r=t.getAttribute("href")||t.getAttribute("src");if(r){var s=document.createElement("iframe");s.setAttribute("src",r),s.setAttribute("frameBorder","0"),s.setAttribute("scrolling","auto"),i.appendChild(s)}else i.innerHTML='<div class="error_message">No iframe source found</div>'}else if(e.type==="image"){i.className="tictail_fullscreen_image",r=t.getAttribute("href")||t.getAttribute("src");if(r){var o=document.createElement("img");o.setAttribute("src",r),i.appendChild(o)}else i.innerHTML='<div class="error_message">No image source found</div>'}else i.className="tictail_fullscreen_unknown";return i},open:function(e){this.close(!1),this.showOverlay();var t=null;e.groupName&&(t=this._groups[e.groupName]);var n=null;if(t){n=document.createElement("div"),n.className="tictail_fullscreen_group",n.appendChild(this.getContent(e,!0));for(var r=0,i=t.length;r<i;r++)t[r]!==e&&n.appendChild(this.getContent(t[r],!0))}else n=this.getContent(e);var s=document.createElement("div");s.className="tictail_fullscreen",h.addEvent(s,"click",function(){S.close()});var o=document.createElement("div");o.className="tictail_fullscreen_container",o.appendChild(n),s.appendChild(o),document.body.appendChild(s),e.root=s,this._current=e,window.scrollTo(0,1)},close:function(e){var t=this._current;t&&(t.root&&(t.root.parentNode&&t.root.parentNode.removeChild(t.root),delete t.root),delete this._current),e!==!1&&this.hideOverlay()},showOverlay:function(){var e=document.body,t=this._overlay;this._scrollPos===void 0&&(this._scrollPos={top:window.pageYOffset!==void 0?window.pageYOffset:document.documentElement?document.documentElement.scrollTop:document.body.scrollTop,left:window.pageXOffset!==void 0?window.pageXOffset:document.documentElement?document.documentElement.scrollLeft:document.body.scrollLeft}),t||(t=this._overlay=document.createElement("div"),t.setAttribute("id","tictail_fullscreen_overlay"),h.addEvent(t,"click",function(){S.close()})),t.parentNode!==e&&e.appendChild(t);var n=this._close;n||(n=this._close=document.createElement("div"),n.setAttribute("id","tictail_fullscreen_close"),h.addEvent(n,"click",function(){S.close()})),n.parentNode!==e&&e.appendChild(n),h.addEvent(document,"keyup",this.keyUpHandler)},hideOverlay:function(){h.removeEvent(document,"keyup",this.keyUpHandler);var e=document.body;this._overlay&&this._overlay.parentNode===e&&e.removeChild(this._overlay),this._close&&this._close.parentNode===e&&e.removeChild(this._close),this._scrollPos!==void 0&&(window.scrollTo(this._scrollPos.left,this._scrollPos.top),delete this._scrollPos)},keyUpHandler:function(e){var t=e.keyCode||e.which;t===27&&S.close()}},x=f.store.social={init:function(e){this.initFacebookButtons(e),this.initTwitterButtons(e),this.initPinterestButtons(e)},initFacebookButtons:function(e){if(h.getElementsByClassName(e,"fb-like").length===0)return;var t="309860612371078",n="en_US";(function(e,r,i){var s,o=e.getElementsByTagName(r)[0];if(e.getElementById(i))return;s=e.createElement(r),s.id=i,s.src="//connect.facebook.net/"+n+"/all.js#xfbml=1&appId="+t,o.parentNode.insertBefore(s,o)})(document,"script","facebook-jssdk")},initTwitterButtons:function(e){if(h.getElementsByClassName(e,"twitter-share-button").length===0)return;(function(e,t,n){var r,i=e.getElementsByTagName(t)[0];e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src="//platform.twitter.com/widgets.js",i.parentNode.insertBefore(r,i))})(document,"script","twitter-wjs")},initPinterestButtons:function(e){if(h.getElementsByClassName(e,"pin-it-button").length===0)return;(function(e,t,n){var r,i=e.getElementsByTagName(t)[0];if(e.getElementById(n))return;r=e.createElement(t),r.id=n,r.src="//assets.pinterest.com/js/pinit.js",i.parentNode.insertBefore(r,i)})(document,"script","pinterest-pinitjs")}};f.init=f.store.init;var T=f.colophon={_re:{hash:/#.*$/,hashMessage:/^#?\d+&/},domReady:function(){this.parent=window.parent,this.store=window.__ttStore,this.parentUrl=null,this.smallScreenMode=!1;if(!this.store){l.error("__ttStore is undefined");return}this.storeUrl=this.store.url,this.idnUrl=this.store.idnUrl,this.cartModel.init(window.__ttCartData),this.update(),this.cart.domReady(),this.follow.domReady(),window.postMessage?(window.location.hash==="#small_screen"&&(this.setSmallScreenMode(!0),window.location.hash=""),h.addEvent(window,"message",function(e){T.rm(e)}),this.pm=this.postMessage,this.informParent(!0)):(this.pollForHashChanges(),this.pm=this.changeHash),v.register({store_subdomain:this.store.subdomain,cart_unique_items:this.cartModel.items.length,is_following:this.store.is_following,is_follow_active:this.store.follow_active}),v.trackLinks("#tictail_link","Clicked Logo"),v.trackLinks(".cart_footer_link_new_tab","Clicked Cart Footer")},update:function(){var e=this.cartModel.getTotalQuantity();h.toggleClass(document.body,"cart_empty",e===0),h.setTextContent(o("cart_quantity"),e.toString())},postMessage:function(e){if(this.parent){var t=JSON.stringify(e);this.parent.postMessage(t,this.storeUrl)}},changeHash:function(e){if(this.parent){var t=JSON.stringify(e),n=this.parentUrl.replace(this._re.hash,"");n+="#"+ +(new Date)+"&"+t,this.parent.location=n}},rm:function(e){if(e.origin!==this.storeUrl&&e.origin!==this.idnUrl){l.error("Domain does not match "+e.origin+" != "+this.storeUrl);return}var t=null;try{t=JSON.parse(e.data)}catch(n){}if(!t)return;switch(t.method){case"init":this.parentUrl===null&&(this.parentUrl=t.url),f.isUndefined(t.small_screen)||this.setSmallScreenMode(t.small_screen),this.informParent(!0);break;case"set_return_url":this.returnUrl=t.url;break;case"enable_small_screen":this.setSmallScreenMode(!0);break;case"disable_small_screen":this.setSmallScreenMode(!1);break;case"add_item":v.track("Added Item to Cart");var r={store_id:t.store_id,product_id:t.product_id,variation_id:t.variation_id},i=h.hasClass(document.body,"is_storekeeper"),o="An error occurred when adding this product to the cart.\nPlease contact support@tictail.com if the problem persists.";if(Number(r.store_id)!==this.store.id||!r.product_id){alert(i?"This Add to cart form is missing some required data.\nPlease contact support@tictail.com if the problem persists.":o);return}t.quantity&&!isNaN(parseInt(t.quantity,10))&&(r.quantity=Math.min(Math.max(parseInt(t.quantity,10),1),9999)),N.addItemToCart(r,function(e){this.cartModel.setItems(e),this.update(),this.cart.update(),this.cart.visible?this.informParent():this.cart.show();if(t.product_id&&t.variation_id){var n=this;setTimeout(function(){n.cart.highlightItem(t.product_id,t.variation_id)},0)}},function(e){if(s[e.code]=="variation_required"){alert(i?"This Add to cart form is missing either a {{#variations_select}} or a {{#variations_radio}} block.\nPlease refer to the documentation at https://tictail.com/docs/index for more information.":o);return}this.pm({method:"add.item.error"})},this);break;case"show_follow":var i=h.hasClass(document.body,"is_storekeeper");i||(v.track("Showed Follow"),this.follow.show({showUnfollowed:t.showUnfollowed}));break;case"hide_follow":this.follow.hide(),v.track("Hid Follow");break;case"show_cart":v.track("Showed Cart"),this.cart.show();break;case"hide_cart":v.track("Hid Cart"),this.cart.hide();break;case"hijack_checkout_links":var u;f.analytics.isValidLinkerUrl(t.url)&&(u=document.getElementById("checkout_button"),u.href=t.url)}},pollForHashChanges:function(e){this.intervalId&&(clearInterval(this.intervalId),delete this.intervalId);if(e===!1)return;var t=this._re.hashMessage;this.intervalId=setInterval(function(){var e=window.location.hash;e!==T._lastHash&&t.test(e)&&(T._lastHash=e,T.rm({origin:T.storeUrl,data:e.replace(t,"")}))},100)},informParent:function(e){var t=h.getSize(o("colophon"),!0),n=16,r=5,i=5,s,u;h.hasClass(document.body,"colophon_active")?this.smallScreenMode?(s="100%",u="100%"):(detailsSize=h.getSize(o("details"),!0),h.hasClass(document.body,"slide")?(u="100%",s=detailsSize.width+r):(u=detailsSize.height+n,s=detailsSize.width+n)):(s=t.width+i,u=t.height+i),this.pm({method:e===!0?"colophon.inited":"resize",width:s,height:u,cart_visible:this.cart.visible,follow_visible:this.follow.visible})},setSmallScreenMode:function(e){e=!!e;if(e===this.smallScreenMode)return;this.smallScreenMode=e,h.toggleClass(document.body,"small_screen",e),h.toggleClass(document.body,"large_screen",!e)}},N=f.colophon.api={API_CART_ADD:"cart.item.add",API_CART_EDIT:"cart.item.edit",API_CART_GET:"cart.get",API_SUBSCRIBE:"subscriber.subscribe",API_UNSUBSCRIBE:"subscriber.unsubscribe",addItemToCart:function(e,t,n,r){return d.post(this.API_CART_ADD,e,{success:t,error:n||this._defaultErrorHandler,ctx:r})},editItemInCart:function(e,t,n,r){return d.post(this.API_CART_EDIT,e,{success:t,error:n||this._defaultErrorHandler,ctx:r})},getCart:function(e,t,n){var r={store_id:T.store.id};return d.post(this.API_CART_GET,r,{success:e,error:t||this._defaultErrorHandler,ctx:n})},subscribeToStore:function(e,t,n,r){return d.post(this.API_SUBSCRIBE,e,{success:t,error:n||this._defaultErrorHandler,ctx:r})},unsubscribeFromStore:function(e,t,n,r){return d.post(this.API_UNSUBSCRIBE,e,{success:t,error:n||this._defaultErrorHandler,ctx:r})},_defaultErrorHandler:function(){l.error.apply(l,["Critical Error"].concat(r.call(arguments)))}},C=f.colophon.cartModel={init:function(e){this.setItems(e)},setItems:function(e){var t=this.items=[],n=this._byId={};if(e)for(var r=0,i=e.length;r<i;r++){var s=e[r];t.push(s),n[String(s.id)]=s}},isEmpty:function(){return this.items.length===0},getItem:function(e){return this._byId[String(e)]||null},getItemByProduct:function(e,t){e=parseInt(e,10),t=parseInt(t,10);for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.product.id===e&&r.variation.id===t)return r}return null},addItem:function(e){var t=String(e.id);this._byId[t]===void 0&&(this.items.push(e),this._byId[t]=e)},removeItem:function(e){var t=this.items,n=this._byId;e=String(e);if(n[e]!==void 0){for(var r=t.length-1;r>=0;r--)if(String(t[r].id)===e){t.splice(r,1);break}delete n[e]}},updateItemQuantity:function(e,t){var n=this._byId[String(e)];n!==void 0&&(n.quantity=t,n.total_price=t*parseFloat(n.variation.price))},getTotalQuantity:function(){var e=this.items,t=0;for(var n=e.length-1;n>=0;n--)t+=e[n].quantity;return t},getTotalPrice:function(){var e=this.items,t=0;for(var n=e.length-1;n>=0;n--)t+=parseFloat(e[n].total_price);return t}},k=f.colophon.cart={domReady:function(){this.visible=h.hasClass(document.body,"colophon_active"),this.cartElem=o("cart"),this.itemRowTemplate=f.trim(o("item_row_template").innerHTML),h.addEvent(o("cart_link"),"click",function(e){e.preventDefault(),k.toggle()}),h.addEvent(document,"click",function(e){e.target===document.documentElement&&k.hide()}),h.addEvent(document,"keyup",function(e){e.keyCode===27&&k.hide()}),h.addEvent(o("close_cart"),"click",function(e){e.preventDefault(),k.hide()}),this.update()},update:function(){var e=o("items_body"),t=C.items;h.empty(e);for(var n=0,r=t.length;n<r;n++)this.renderItemRow(t[n],e);this.updateTotalPrice()},renderItemRow:function(e,t){var n=!1,r;if(e.image&&e.image.sizes){r=e.image.sizes;for(var i in r)r.hasOwnProperty(i)&&(n===!1&&(n={}),n["url-"+i]=r[i])}var s={id:e.id,product_title:e.product.title,product_url:e.product.relative_url,variation_label:e.variation.label,has_variation_label:!!e.variation.label,variation_price:parseFloat(e.variation.price).toFixed(2),quantity:e.quantity,image:n,total_price:parseFloat(e.total_price).toFixed(2),currency:T.store.currency,store_url:T.store.url},o=Mustache.render(this.itemRowTemplate,s),u=document.createElement("div");u.innerHTML="<table><tbody>"+f.trim(o)+"</tbody></table>",t.appendChild(u.firstChild.firstChild.firstChild);var a=function(){var t=parseInt(this.value,10);isNaN(t)&&(t=1),t=Math.min(Math.max(t,0),9999);var n=e.quantity;if(t===n)return;C.updateItemQuantity(e.id,t),k.itemQuantityUpdated(e.id),N.editItemInCart({store_id:T.store.id,order_item_id:e.id,quantity:t},null,function(t){l.error("Item quantity update failed",t),C.updateItemQuantity(e.id,n),k.itemQuantityUpdated(e.id)})};f.each(h.getElementsByClassName(document,"item_quantity_input_"+e.id),function(e){h.addEvent(e,"change",a),h.addEvent(e,"keyup",function(e){e.keyCode===13&&a.call(this)})});var c=function(){N.editItemInCart({store_id:T.store.id,order_item_id:e.id,quantity:0},function(){C.removeItem(e.id),T.update(),k.update(),C.isEmpty()&&k.hide()},function(e){l.error("Item quantity update failed",e)})};f.each(h.getElementsByClassName(document,"item_remove_"+e.id),function(e){h.addEvent(e,"click",function(e){e.preventDefault(),c()})})},updateTotalPrice:function(){var e=C.getTotalPrice();f.each(h.getElementsByClassName(document,"cart_total_price"),function(t){h.setTextContent(t,e.toFixed(2))}),v.register({cart_total_price:e})},itemQuantityUpdated:function(e){var t=C.getItem(e);f.each(h.getElementsByClassName(document,"item_quantity_input_"+e),function(e){e.value=t.quantity.toString()}),f.each(h.getElementsByClassName(document,"item_total_price_"+e),function(e){h.setTextContent(e,parseFloat(t.total_price).toFixed(2))}),T.update(),k.updateTotalPrice()},highlightItem:function(e,t){var n=0;if(!f.isUndefined(t)){var r=C.getItemByProduct(e,t);r!==null&&(n=r.id)}else n=e;n&&f.each(h.getElementsByClassName(document,"item_row_"+n),function(e){var t=e.parent;t&&t.id==="small_items_body"&&(t.scrollTop=e.offsetTop-t.offsetTop+t.scrollTop),h.addClass(e,"highlighted"),setTimeout(function(){h.removeClass(e,"highlighted")},1e3)})},show:function(){if(this.visible)return;T.follow.hide(),h.addClass(document.body,"colophon_active"),h.reflow(),h.addClass(document.body,"cart_active"),h.removeClass(document.body,"follow_active"),this.visible=!0,T.informParent()},hide:function(){if(!this.visible)return;h.removeClass(document.body,"colophon_active"),this.visible=!1,this.clearTimeout(),T.follow.clearTimeout(),this.timeout=setTimeout(function(){T.informParent(),h.removeClass(document.body,"cart_active")},250)},clearTimeout:function(){this.timeout&&window.clearTimeout(this.timeout)},toggle:function(){this.visible?this.hide():this.show()}},L=f.colophon.follow={fbReady:function(){h.addClass(document.body,"fb_ready"),FB.getLoginStatus(function(e){var t=e.status||"unknown";h.addClass(document.body,"fb_status_"+t)})},domReady:function(){this.visible=!1,this.followElem=o("follow"),this.followLink=o("follow_link"),this.detailsElm=o("details");var e=this;this.detailsElm.addEventListener&&this.detailsElm.addEventListener("transitionend",function(t){e.visible&&o("follow_email").focus()},!1);if(this.followLink===null)return;h.addEvent(o("close_follow"),"click",function(e){e.preventDefault(),L.hide()}),h.addEvent(o("follow_link"),"click",function(e){e.preventDefault(),L.toggle()}),h.addEvent(o("follow_subscribe_button"),"click",function(e){e.preventDefault(),L.subscribe()}),h.addEvent(o("follow_facebook_connect_button"),"click",function(e){e.preventDefault(),L.facebookConnectSubscribe()}),h.addEvent(o("follow_form"),"submit",function(e){e.preventDefault(),L.subscribe()}),h.addEvent(document,"click",function(e){e.target===document.documentElement&&L.hide()}),h.addEvent(document,"keyup",function(e){e.keyCode===27&&L.hide()})},displayNotice:function(e){var t=o("follow_message");t.innerHTML=e},toggleFollowing:function(){h.toggleClass(document.body,"colophon_is_following"),h.toggleClass(document.body,"colophon_is_not_following")},toggleFollowCount:function(){h.toggleClass(document.body,"colophon_has_followers"),h.toggleClass(document.body,"colophon_has_no_followers")},changeFollowCount:function(e){var t=o("follow_count"),n=f.colophon.store.follow_count;f.colophon.store.follow_count+=e,f.colophon.store.follow_count==0?this.toggleFollowCount():(n==0&&this.toggleFollowCount(),f.colophon.store.follow_count<=1e3&&h.setTextContent(t,f.colophon.store.follow_count))},displayError:function(e,t){var n=i.unknown_error;e&&e.code&&(n=i[s[String(e.code)]||"unknown_error"]),this.displayNotice(n),(!t||t.toggleErrorClass!==!1)&&h.toggleClass(o("follow"),"error",!0)},subscribe:function(e,t){var n={source:t||"Email Input"};e||(e=o("follow_email").value);var r=T.store.subdomain;h.toggleClass(o("follow"),"error",!1),N.subscribeToStore({email:e,subdomain:r},function(e){L.toggleFollowing(),L.changeFollowCount(1),v.track("Follow: Subscribed","Store: "+T.store.subdomain,n)},function(e){v.track("Got Error when Subscribing","Store: "+T.store.subdomain,n),String(e.code)==="-32700"?(o("return_url").value=f.colophon.returnUrl+"#follow",o("follow_form").submit()):L.displayError(e)})},facebookConnectSubscribe:function(){if(!window.FB)return;v.track("Follow: Clicked on Facebook Connect","Store: "+T.store.subdomain);var e=function(){L.displayError(null,{toggleErrorClass:!1}),v.track("Follow: Facebook Connect Error","Store: "+T.store.subdomain)},t=function(){FB.api("/me",function(t){if(!t.email)return e();L.subscribe(t.email,"Facebook Connect"),v.track("Follow: Subscribed with Facebook Connect","Store: "+T.store.subdomain)})};FB.getLoginStatus(function(n){if(n==="connected")return t();FB.login(function(n){if(n.status!=="connected")return e();t()},{scope:"email"})})},unsubscribe:function(){var e=o("follow_email").value,t=T.store.subdomain;h.toggleClass(o("follow"),"error",!1),N.unsubscribeFromStore({email:e,subdomain:t},function(e){L.toggleFollowing(),L.changeFollowCount(-1),v.track("Follow: Unsubscribed","Store: "+T.store.subdomain)},function(e){L.displayError(e),v.track("Got Error when Unsubscribing","Store: "+T.store.subdomain)})},show:function(e){if(this.visible)return;T.cart.hide(),h.addClass(document.body,"colophon_active"),h.reflow(),h.addClass(document.body,"follow_active"),h.removeClass(document.body,"cart_active"),e&&e.showUnfollowed?h.addClass(document.body,"colophon_unfollowed"):h.removeClass(document.body,"colophon_unfollowed"),this.visible=!0,T.informParent(),v.track("Follow: Shown","Store: "+T.store.subdomain)},hide:function(){if(!this.visible)return;h.removeClass(document.body,"colophon_active"),this.visible=!1,this.clearTimeout(),T.cart.clearTimeout(),this.timeout=setTimeout(function(){T.informParent(),h.removeClass(document.body,"follow_active")},250),v.track("Follow: Hidden","Store: "+T.store.subdomain)},clearTimeout:function(){this.timeout&&window.clearTimeout(this.timeout)},toggle:function(){this.visible?this.hide():this.show()}},A=f.analytics={init:function(){var e=document.domain,t=window.__ttAnalyticsId,n=window.__ttSubdomain;this.transparentSession()&&(e=g.baseDomain),_gaq.push(["tt._setAccount",t],["tt._setDomainName",e],["tt._setAllowLinker",!0],["tt._setCampSourceKey","utm_source"],["tt._setCampMediumKey","utm_medium"],["tt._setCampContentKey","utm_content"],["tt._setCampTermKey","utm_keyword"],["tt._setCampNameKey","utm_campaign"],["tt._setCustomVar",1,"Store",n])},track:function(){_gaq.push(["tt._trackPageview"])},hasCustomDomain:function(){return document.domain.match(g.baseDomain)===null},isInternetExplorer:function(){return navigator.userAgent.toLowerCase().indexOf("msie")!=-1?!0:!1},transparentSession:function(){return!this.hasCustomDomain()&&!this.isInternetExplorer()},isValidLinkerUrl:function(e){return f.isString(e)&&e!==""},hijackCheckout:function(){var e=this;if(e.transparentSession())return;_gaq.push(function(){var t=window.__ttSubdomain,n=_gat._getTrackerByName(),r=g.baseUrl+"/payment/"+t+"/checkout",i=n._getLinkerUrl(r);if(!e.isValidLinkerUrl(i))return;g.pm({method:"hijack_checkout_links",url:i})})}},O=f.loadScript=function(e,t,n){var r,i=document.getElementsByTagName("head")[0],n=f.isUndefined(n)||!f.isFunction(n)?f.noop:n;if(document.getElementById(e)!=null){n(e,t);return}n._done=!1,r=document.createElement("script"),r.async=!0,r.src=t,r.id=e,r.onload=r.onreadystatechange=function(){var r=this.readyState;if(n._done||r&&!/loaded|complete/.test(r))return;try{n._done=!0,n(e,t)}catch(i){}},i.appendChild(r)},M=f.hasjQuery=function(e){var t=function(e,t){function n(e){return parseInt(f.trim(e))}if(e==null)return!1;if(t==null||t==="")return!0;var e=f.map(e.split("."),n),t=f.map(t.split("."),n);for(var r=0;r<3;r++){e[r]==null&&(e[r]=0),t[r]==null&&(t[r]=0);if(e[r]!==t[r])return e[r]>t[r]}return!0};return!f.isUndefined(window.jQuery)&&t(window.jQuery.fn.jquery,e)};return f}(),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()